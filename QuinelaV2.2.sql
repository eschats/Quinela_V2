-- MySQL Script generated by MySQL Workbench
-- Wed Oct 12 19:19:44 2022
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema Quinela
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema Quinela
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `Quinela` DEFAULT CHARACTER SET utf8 ;
-- -----------------------------------------------------
-- Schema mundial_2022
-- -----------------------------------------------------
USE `Quinela` ;

-- -----------------------------------------------------
-- Table `Quinela`.`ROL`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Quinela`.`ROL` (
  `ID_ROL` INT NOT NULL AUTO_INCREMENT,
  `DESCRIPCION` VARCHAR(45) NULL,
  PRIMARY KEY (`ID_ROL`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Quinela`.`USUARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Quinela`.`USUARIO` (
  `CORREO` VARCHAR(50) NOT NULL,
  `NOMBRE` VARCHAR(45) NOT NULL,
  `APELLIDO` VARCHAR(50) NOT NULL,
  `CONTRASEÃ‘A` VARCHAR(45) NOT NULL,
  `ROL_ID_ROL` INT NOT NULL,
  PRIMARY KEY (`CORREO`, `ROL_ID_ROL`),
  INDEX `fk_USUARIO_ROL1_idx` (`ROL_ID_ROL` ASC) VISIBLE,
  CONSTRAINT `fk_USUARIO_ROL1`
    FOREIGN KEY (`ROL_ID_ROL`)
    REFERENCES `Quinela`.`ROL` (`ID_ROL`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Quinela`.`LIGA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Quinela`.`LIGA` (
  `NOMBRE_LIGA` VARCHAR(50) NOT NULL,
  `TIPO` VARCHAR(50) NOT NULL,
  `COSTO` VARCHAR(50) NULL,
  PRIMARY KEY (`NOMBRE_LIGA`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Quinela`.`RELACION_LIGA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Quinela`.`RELACION_LIGA` (
  `ID_RELACION` INT NOT NULL AUTO_INCREMENT,
  `LIGA_NOMBRE_LIGA` VARCHAR(50) NOT NULL,
  `USUARIO_CORREO` VARCHAR(50) NOT NULL,
  `DESCRIPCION` VARCHAR(50) NOT NULL,
  `ROL_LIGA` VARCHAR(45) NOT NULL,
  `MONTO_TOTAL` VARCHAR(60) NULL,
  PRIMARY KEY (`ID_RELACION`, `LIGA_NOMBRE_LIGA`, `USUARIO_CORREO`),
  INDEX `fk_RELACION_LIGA_LIGA1_idx` (`LIGA_NOMBRE_LIGA` ASC) VISIBLE,
  INDEX `fk_RELACION_LIGA_USUARIO1_idx` (`USUARIO_CORREO` ASC) VISIBLE,
  CONSTRAINT `fk_RELACION_LIGA_LIGA1`
    FOREIGN KEY (`LIGA_NOMBRE_LIGA`)
    REFERENCES `Quinela`.`LIGA` (`NOMBRE_LIGA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_RELACION_LIGA_USUARIO1`
    FOREIGN KEY (`USUARIO_CORREO`)
    REFERENCES `Quinela`.`USUARIO` (`CORREO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Quinela`.`EQUIPO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Quinela`.`EQUIPO` (
  `ID_EQUIPO` INT NOT NULL AUTO_INCREMENT,
  `NOMBRE` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`ID_EQUIPO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Quinela`.`GRUPO_ESTADO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Quinela`.`GRUPO_ESTADO` (
  `ID_GRUPO` INT NOT NULL AUTO_INCREMENT,
  `NOMBRE` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID_GRUPO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Quinela`.`RELACION_GRUPO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Quinela`.`RELACION_GRUPO` (
  `ID_RELACION_GRUPO` INT NOT NULL AUTO_INCREMENT,
  `EQUIPO_ID_EQUIPO` INT NOT NULL,
  `GRUPO_ID_GRUPO` INT NOT NULL,
  PRIMARY KEY (`ID_RELACION_GRUPO`, `EQUIPO_ID_EQUIPO`, `GRUPO_ID_GRUPO`),
  INDEX `fk_GRUPO_EQUIPO_EQUIPO1_idx` (`EQUIPO_ID_EQUIPO` ASC) VISIBLE,
  INDEX `fk_GRUPO_EQUIPO_GRUPO1_idx` (`GRUPO_ID_GRUPO` ASC) VISIBLE,
  CONSTRAINT `fk_GRUPO_EQUIPO_EQUIPO1`
    FOREIGN KEY (`EQUIPO_ID_EQUIPO`)
    REFERENCES `Quinela`.`EQUIPO` (`ID_EQUIPO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_GRUPO_EQUIPO_GRUPO1`
    FOREIGN KEY (`GRUPO_ID_GRUPO`)
    REFERENCES `Quinela`.`GRUPO_ESTADO` (`ID_GRUPO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Quinela`.`PARTIDO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Quinela`.`PARTIDO` (
  `ID_PARTIDO` INT NOT NULL AUTO_INCREMENT,
  `DESCRIPCION` VARCHAR(50) NOT NULL,
  `FECHA` DATE NOT NULL,
  PRIMARY KEY (`ID_PARTIDO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Quinela`.`SEDE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Quinela`.`SEDE` (
  `ID_SEDE` INT NOT NULL AUTO_INCREMENT,
  `NOMBRE` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`ID_SEDE`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Quinela`.`RELACION_PARTIDO_EQUIPO_ADMINISTRATIVO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Quinela`.`RELACION_PARTIDO_EQUIPO_ADMINISTRATIVO` (
  `ID_RELACION_PARTIDO` INT NOT NULL,
  `PARTIDO_ID_PARTIDO` INT NOT NULL,
  `EQUIPO_ID_EQUIPO` INT NOT NULL,
  `GOLES` VARCHAR(45) NOT NULL,
  `PENALES` VARCHAR(45) NOT NULL,
  `SEDE_ID_SEDE` INT NOT NULL,
  PRIMARY KEY (`ID_RELACION_PARTIDO`, `PARTIDO_ID_PARTIDO`, `EQUIPO_ID_EQUIPO`, `SEDE_ID_SEDE`),
  INDEX `fk_RELACION_PARTIDO_PARTIDO1_idx` (`PARTIDO_ID_PARTIDO` ASC) VISIBLE,
  INDEX `fk_RELACION_PARTIDO_EQUIPO1_idx` (`EQUIPO_ID_EQUIPO` ASC) VISIBLE,
  INDEX `fk_RELACION_PARTIDO_EQUIPO_ADMINISTRATIVO_SEDE1_idx` (`SEDE_ID_SEDE` ASC) VISIBLE,
  CONSTRAINT `fk_RELACION_PARTIDO_PARTIDO1`
    FOREIGN KEY (`PARTIDO_ID_PARTIDO`)
    REFERENCES `Quinela`.`PARTIDO` (`ID_PARTIDO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_RELACION_PARTIDO_EQUIPO1`
    FOREIGN KEY (`EQUIPO_ID_EQUIPO`)
    REFERENCES `Quinela`.`EQUIPO` (`ID_EQUIPO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_RELACION_PARTIDO_EQUIPO_ADMINISTRATIVO_SEDE1`
    FOREIGN KEY (`SEDE_ID_SEDE`)
    REFERENCES `Quinela`.`SEDE` (`ID_SEDE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Quinela`.`RELACION_PARTIDO_EQUIPO_APUESTA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Quinela`.`RELACION_PARTIDO_EQUIPO_APUESTA` (
  `ID_RELACION_PARTIDO` INT NOT NULL,
  `GOLES` VARCHAR(45) NOT NULL,
  `PENALES` VARCHAR(45) NOT NULL,
  `EQUIPO_ID_EQUIPO` INT NOT NULL,
  `PARTIDO_ID_PARTIDO` INT NOT NULL,
  `USUARIO_ID_USUARIO` INT NOT NULL,
  `SEDE_ID_SEDE` INT NOT NULL,
  `LIGA_NOMBRE_LIGA` VARCHAR(50) NOT NULL,
  `USUARIO_CORREO` VARCHAR(50) NOT NULL,
  `USUARIO_ROL_ID_ROL` INT NOT NULL,
  PRIMARY KEY (`ID_RELACION_PARTIDO`, `EQUIPO_ID_EQUIPO`, `PARTIDO_ID_PARTIDO`, `SEDE_ID_SEDE`),
  INDEX `fk_RELACION_PARTIDO_EQUIPO_APUESTA_EQUIPO1_idx` (`EQUIPO_ID_EQUIPO` ASC) VISIBLE,
  INDEX `fk_RELACION_PARTIDO_EQUIPO_APUESTA_PARTIDO1_idx` (`PARTIDO_ID_PARTIDO` ASC) VISIBLE,
  INDEX `fk_RELACION_PARTIDO_EQUIPO_APUESTA_SEDE1_idx` (`SEDE_ID_SEDE` ASC) VISIBLE,
  INDEX `fk_RELACION_PARTIDO_EQUIPO_APUESTA_LIGA1_idx` (`LIGA_NOMBRE_LIGA` ASC) VISIBLE,
  INDEX `fk_RELACION_PARTIDO_EQUIPO_APUESTA_USUARIO1_idx` (`USUARIO_CORREO` ASC, `USUARIO_ROL_ID_ROL` ASC) VISIBLE,
  CONSTRAINT `fk_RELACION_PARTIDO_EQUIPO_APUESTA_EQUIPO1`
    FOREIGN KEY (`EQUIPO_ID_EQUIPO`)
    REFERENCES `Quinela`.`EQUIPO` (`ID_EQUIPO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_RELACION_PARTIDO_EQUIPO_APUESTA_PARTIDO1`
    FOREIGN KEY (`PARTIDO_ID_PARTIDO`)
    REFERENCES `Quinela`.`PARTIDO` (`ID_PARTIDO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_RELACION_PARTIDO_EQUIPO_APUESTA_SEDE1`
    FOREIGN KEY (`SEDE_ID_SEDE`)
    REFERENCES `Quinela`.`SEDE` (`ID_SEDE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_RELACION_PARTIDO_EQUIPO_APUESTA_LIGA1`
    FOREIGN KEY (`LIGA_NOMBRE_LIGA`)
    REFERENCES `Quinela`.`LIGA` (`NOMBRE_LIGA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_RELACION_PARTIDO_EQUIPO_APUESTA_USUARIO1`
    FOREIGN KEY (`USUARIO_CORREO` , `USUARIO_ROL_ID_ROL`)
    REFERENCES `Quinela`.`USUARIO` (`CORREO` , `ROL_ID_ROL`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Quinela`.`PUNTOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Quinela`.`PUNTOS` (
  `ID_PUNTO` INT NOT NULL AUTO_INCREMENT,
  `PUNTO` VARCHAR(50) NOT NULL,
  `USUARIO_ID_USUARIO` INT NOT NULL,
  `LIGA_NOMBRE_LIGA` VARCHAR(50) NOT NULL,
  `USUARIO_CORREO` VARCHAR(50) NOT NULL,
  `USUARIO_ROL_ID_ROL` INT NOT NULL,
  PRIMARY KEY (`ID_PUNTO`),
  INDEX `fk_PUNTOS_LIGA1_idx` (`LIGA_NOMBRE_LIGA` ASC) VISIBLE,
  INDEX `fk_PUNTOS_USUARIO1_idx` (`USUARIO_CORREO` ASC, `USUARIO_ROL_ID_ROL` ASC) VISIBLE,
  CONSTRAINT `fk_PUNTOS_LIGA1`
    FOREIGN KEY (`LIGA_NOMBRE_LIGA`)
    REFERENCES `Quinela`.`LIGA` (`NOMBRE_LIGA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_PUNTOS_USUARIO1`
    FOREIGN KEY (`USUARIO_CORREO` , `USUARIO_ROL_ID_ROL`)
    REFERENCES `Quinela`.`USUARIO` (`CORREO` , `ROL_ID_ROL`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Quinela`.`PAGO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Quinela`.`PAGO` (
  `ID_PAGO` INT NOT NULL AUTO_INCREMENT,
  `TARJETA` VARCHAR(50) NOT NULL,
  `FECHA_VENCIMIENTO` VARCHAR(50) NULL,
  `USUARIO_ID_USUARIO` INT NOT NULL,
  `USUARIO_CORREO` VARCHAR(50) NOT NULL,
  `USUARIO_ROL_ID_ROL` INT NOT NULL,
  PRIMARY KEY (`ID_PAGO`),
  INDEX `fk_PAGO_USUARIO1_idx` (`USUARIO_CORREO` ASC, `USUARIO_ROL_ID_ROL` ASC) VISIBLE,
  CONSTRAINT `fk_PAGO_USUARIO1`
    FOREIGN KEY (`USUARIO_CORREO` , `USUARIO_ROL_ID_ROL`)
    REFERENCES `Quinela`.`USUARIO` (`CORREO` , `ROL_ID_ROL`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
